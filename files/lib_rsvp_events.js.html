<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>lib/rsvp/events.js - rsvp</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="rsvp"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 3.0.6</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/RSVP.html">RSVP</a></li>
            
                <li><a href="../classes/RSVP.EventTarget.html">RSVP.EventTarget</a></li>
            
                <li><a href="../classes/RSVP.Promise.html">RSVP.Promise</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: lib/rsvp/events.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
function indexOf(callbacks, callback) {
  for (var i=0, l=callbacks.length; i&lt;l; i++) {
    if (callbacks[i] === callback) { return i; }
  }

  return -1;
}

function callbacksFor(object) {
  var callbacks = object._promiseCallbacks;

  if (!callbacks) {
    callbacks = object._promiseCallbacks = {};
  }

  return callbacks;
}

/**
  @class RSVP.EventTarget
*/
export default {

  /**
    &#x60;RSVP.EventTarget.mixin&#x60; extends an object with EventTarget methods. For
    Example:

    &#x60;&#x60;&#x60;javascript
    var object = {};

    RSVP.EventTarget.mixin(object);

    object.on(&quot;finished&quot;, function(event) {
      // handle event
    });

    object.trigger(&quot;finished&quot;, { detail: value });
    &#x60;&#x60;&#x60;

    &#x60;EventTarget.mixin&#x60; also works with prototypes:

    &#x60;&#x60;&#x60;javascript
    var Person = function() {};
    RSVP.EventTarget.mixin(Person.prototype);

    var yehuda = new Person();
    var tom = new Person();

    yehuda.on(&quot;poke&quot;, function(event) {
      console.log(&quot;Yehuda says OW&quot;);
    });

    tom.on(&quot;poke&quot;, function(event) {
      console.log(&quot;Tom says OW&quot;);
    });

    yehuda.trigger(&quot;poke&quot;);
    tom.trigger(&quot;poke&quot;);
    &#x60;&#x60;&#x60;

    @method mixin
    @for RSVP.EventTarget
    @private
    @param {Object} object object to extend with EventTarget methods
  */
  mixin: function(object) {
    object.on = this.on;
    object.off = this.off;
    object.trigger = this.trigger;
    object._promiseCallbacks = undefined;
    return object;
  },

  /**
    Registers a callback to be executed when &#x60;eventName&#x60; is triggered

    &#x60;&#x60;&#x60;javascript
    object.on(&#x27;event&#x27;, function(eventInfo){
      // handle the event
    });

    object.trigger(&#x27;event&#x27;);
    &#x60;&#x60;&#x60;

    @method on
    @for RSVP.EventTarget
    @private
    @param {String} eventName name of the event to listen for
    @param {Function} callback function to be called when the event is triggered.
  */
  on: function(eventName, callback) {
    var allCallbacks = callbacksFor(this), callbacks;

    callbacks = allCallbacks[eventName];

    if (!callbacks) {
      callbacks = allCallbacks[eventName] = [];
    }

    if (indexOf(callbacks, callback) === -1) {
      callbacks.push(callback);
    }
  },

  /**
    You can use &#x60;off&#x60; to stop firing a particular callback for an event:

    &#x60;&#x60;&#x60;javascript
    function doStuff() { // do stuff! }
    object.on(&#x27;stuff&#x27;, doStuff);

    object.trigger(&#x27;stuff&#x27;); // doStuff will be called

    // Unregister ONLY the doStuff callback
    object.off(&#x27;stuff&#x27;, doStuff);
    object.trigger(&#x27;stuff&#x27;); // doStuff will NOT be called
    &#x60;&#x60;&#x60;

    If you don&#x27;t pass a &#x60;callback&#x60; argument to &#x60;off&#x60;, ALL callbacks for the
    event will not be executed when the event fires. For example:

    &#x60;&#x60;&#x60;javascript
    var callback1 = function(){};
    var callback2 = function(){};

    object.on(&#x27;stuff&#x27;, callback1);
    object.on(&#x27;stuff&#x27;, callback2);

    object.trigger(&#x27;stuff&#x27;); // callback1 and callback2 will be executed.

    object.off(&#x27;stuff&#x27;);
    object.trigger(&#x27;stuff&#x27;); // callback1 and callback2 will not be executed!
    &#x60;&#x60;&#x60;

    @method off
    @for RSVP.EventTarget
    @private
    @param {String} eventName event to stop listening to
    @param {Function} callback optional argument. If given, only the function
    given will be removed from the event&#x27;s callback queue. If no &#x60;callback&#x60;
    argument is given, all callbacks will be removed from the event&#x27;s callback
    queue.
  */
  off: function(eventName, callback) {
    var allCallbacks = callbacksFor(this), callbacks, index;

    if (!callback) {
      allCallbacks[eventName] = [];
      return;
    }

    callbacks = allCallbacks[eventName];

    index = indexOf(callbacks, callback);

    if (index !== -1) { callbacks.splice(index, 1); }
  },

  /**
    Use &#x60;trigger&#x60; to fire custom events. For example:

    &#x60;&#x60;&#x60;javascript
    object.on(&#x27;foo&#x27;, function(){
      console.log(&#x27;foo event happened!&#x27;);
    });
    object.trigger(&#x27;foo&#x27;);
    // &#x27;foo event happened!&#x27; logged to the console
    &#x60;&#x60;&#x60;

    You can also pass a value as a second argument to &#x60;trigger&#x60; that will be
    passed as an argument to all event listeners for the event:

    &#x60;&#x60;&#x60;javascript
    object.on(&#x27;foo&#x27;, function(value){
      console.log(value.name);
    });

    object.trigger(&#x27;foo&#x27;, { name: &#x27;bar&#x27; });
    // &#x27;bar&#x27; logged to the console
    &#x60;&#x60;&#x60;

    @method trigger
    @for RSVP.EventTarget
    @private
    @param {String} eventName name of the event to be triggered
    @param {Any} options optional value to be passed to any event handlers for
    the given &#x60;eventName&#x60;
  */
  trigger: function(eventName, options) {
    var allCallbacks = callbacksFor(this),
        callbacks, callbackTuple, callback, binding;

    if (callbacks = allCallbacks[eventName]) {
      // Don&#x27;t cache the callbacks.length since it may grow
      for (var i=0; i&lt;callbacks.length; i++) {
        callback = callbacks[i];

        callback(options);
      }
    }
  }
};

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
